(this["webpackJsonpwashoe-app"]=this["webpackJsonpwashoe-app"]||[]).push([[0],{342:function(e,t,n){"use strict";n.r(t);var r=n(34),c=n.n(r),i=n(43),a=n(0),o=n(222),s=n(412),j=n(47),l=n(4),d=n(5),u=n(142),b=n.n(u),O=b.a.create({baseURL:"https://api.streltsov.rocks:3001/api/v1"});O.interceptors.request.use((function(e){return Object(d.a)(Object(d.a)({},e),{},{headers:Object(d.a)(Object(d.a)({},e.headers),{},{authorization:localStorage.getItem("token")})})}),(function(e){return Promise.reject(e)}));var x=n(224),h=n(2),p=Object(a.createContext)({}),m=function(e){var t=e.children,n=Object(a.useState)((function(){return Boolean(localStorage.token)})),r=Object(l.a)(n,2),c=r[0],i=r[1];window.onstorage=function(e){var t=e.key,n=e.newValue;return"token"===t&&i(Boolean(n))};var o=Object(j.useMutation)((function(e){return O.post("/user/login",e)}),{onSuccess:function(e){var t=e.data.token;i(Boolean(t)),localStorage.setItem("token",t)},onError:function(){x.b.error("Something went wrong")}}),s=o.mutate,d=o.isLoading,u=Object(j.useMutation)((function(e){return O.post("/user/signup",e)}),{onSuccess:function(e){var t=e.data.token;i(Boolean(t)),localStorage.setItem("token",t)},onError:function(){x.b.error("Something went wrong")}}),b=u.mutate,m={isAuthenticated:c,isLoggingIn:d,logIn:s,isSigningUp:u.isLoading,signUp:b};return Object(h.jsx)(p.Provider,{value:m,children:t})},f=function(){return Object(a.useContext)(p)},g=n(400),v=n(399),w=n(17),y=n(417),S=n(414),k=n(416),I=n(411),C=function(){return Object(h.jsxs)(S.a,{position:"fixed",component:"nav",children:[Object(h.jsxs)(k.a,{children:[Object(h.jsx)(I.a,{color:"inherit",component:i.b,to:"/",children:"Washoe"}),Object(h.jsxs)(y.a,{ml:"auto",display:"flex",gap:1,children:[Object(h.jsx)(I.a,{color:"inherit",component:i.b,to:"/add-word",children:"Add Word"}),Object(h.jsx)(I.a,{color:"inherit",component:i.b,to:"/my-words",children:"My Words"})]})]}),Object(h.jsx)(v.a,{})]})},E=function(){return f().isAuthenticated?Object(h.jsxs)(y.a,{sx:{marginTop:"64px"},children:[Object(h.jsx)(C,{}),Object(h.jsx)(w.b,{})]}):Object(h.jsx)(w.b,{})},L=n(406),P=n(418),T=n(405),F=n(409),A=n(223),B=n(433),W=n(434),U=L.a.Title,q=L.a.Text,D=function(e){var t=e.onLogIn;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(P.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(h.jsx)(U,{level:3,children:"Log In"}),Object(h.jsx)(q,{type:"secondary",children:"to continue to Washoe"})]}),Object(h.jsxs)(T.a,{onFinish:t,children:[Object(h.jsx)(T.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(h.jsx)(F.a,{prefix:Object(h.jsx)(B.a,{}),placeholder:"Email"})}),Object(h.jsx)(T.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(h.jsx)(F.a.Password,{prefix:Object(h.jsx)(W.a,{}),placeholder:"Password"})}),Object(h.jsx)(T.a.Item,{children:Object(h.jsx)(A.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Log In"})})]}),Object(h.jsx)(P.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(h.jsxs)(q,{children:["New to Washoe? ",Object(h.jsx)(i.b,{to:"/signup",children:"Create an account"})]})})]})};var M=function(){var e=f(),t=e.logIn;return function(e){var t,n,r=Object(w.l)().state,c=Object(w.n)(),i=(null===r||void 0===r||null===(t=r.from)||void 0===t?void 0:t.pathname)+(null===r||void 0===r||null===(n=r.from)||void 0===n?void 0:n.search)||"/";Object(a.useEffect)((function(){e&&c(i,{replace:!0})}),[e,i,c])}(e.isAuthenticated),Object(h.jsx)(D,{onLogIn:t})},Q=L.a.Title,z=L.a.Text,N=function(e){var t=e.onSignUp;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(P.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(h.jsx)(Q,{level:3,children:"Sign Up"}),Object(h.jsx)(z,{type:"secondary",children:"to continue to Washoe"})]}),Object(h.jsxs)(T.a,{onFinish:t,children:[Object(h.jsx)(T.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(h.jsx)(F.a,{prefix:Object(h.jsx)(B.a,{}),placeholder:"Email"})}),Object(h.jsx)(T.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(h.jsx)(F.a.Password,{prefix:Object(h.jsx)(W.a,{}),placeholder:"Password"})}),Object(h.jsx)(T.a.Item,{children:Object(h.jsx)(A.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Sign Up"})})]}),Object(h.jsx)(P.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(h.jsxs)(z,{children:["Already have an account? ",Object(h.jsx)(i.b,{to:"/login",children:"Log In"})]})})]})},_=function(){var e=f().signUp;return Object(h.jsx)(N,{onSignUp:e})},J=function(){return Object(j.useMutation)((function(e){return O.post("/word/create",e)}))},R=n(3);function V(e){var t=Object(i.c)(),n=Object(l.a)(t,2),r=n[0],c=n[1];return[r.get(e)||"",function(t){var n=Object.fromEntries(r),i=Object(R.a)({},e,t),a=Object(d.a)(Object(d.a)({},n),i);c(a,{replace:!0})}]}var G=function(e){return Object(j.useQuery)(["get-definition",e],(function(){return function(e){return b.a.get("https://api.dictionaryapi.dev/api/v2/entries/en/"+e).then((function(e){return e.data}))}(e)}),{refetchOnWindowFocus:!1,cacheTime:1/0,enabled:Boolean(e),initialData:[]})},H=function(e){var t=e.children;return Object(h.jsx)(y.a,{children:t})},K=L.a.Title,X=function(){var e=V("word"),t=Object(l.a)(e,2),n=t[0],r=t[1],c=V("definition"),i=Object(l.a)(c,2),a=i[0],o=i[1],s=V("example"),j=Object(l.a)(s,2),u=j[0],b=j[1],O=J(),p=O.mutate,m=O.isLoading,f=T.a.useForm(),g=Object(l.a)(f,1)[0];return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(H,{children:[Object(h.jsx)(K,{level:3,children:"Add a Word"}),Object(h.jsxs)(T.a,{form:g,initialValues:{word:n,definition:a,example:u},onFinish:function(e){p(function(e){var t=e.word,n=e.definition,r=e.example;return Object(d.a)(Object(d.a)({word:t},n?{definition:n}:{}),r?{example:r}:{})}(e),{onSuccess:function(){x.b.success("Success!"),g.resetFields()},onError:function(){x.b.error("Something went wrong")}})},children:[Object(h.jsx)(T.a.Item,{name:"word",required:!0,children:Object(h.jsx)(F.a,{onChange:function(e){var t=e.currentTarget;return r(t.value)},disabled:m,placeholder:"Word"})}),Object(h.jsx)(T.a.Item,{name:"definition",required:!0,children:Object(h.jsx)(F.a.TextArea,{onChange:function(e){var t=e.currentTarget;return o(t.value)},disabled:m,placeholder:"Definition"})}),Object(h.jsx)(T.a.Item,{name:"example",required:!0,children:Object(h.jsx)(F.a.TextArea,{onChange:function(e){var t=e.currentTarget;return b(t.value)},disabled:m,placeholder:"Example"})}),Object(h.jsx)(A.a,{loading:m,type:"primary",htmlType:"submit",style:{width:"100%"},children:"Add"})]})]})})},Y=n(94),Z=new j.QueryClient,$=n(217),ee=n(408),te=n(426),ne=n(429),re=n(431),ce=n(425),ie=n(427),ae=n(428),oe=n(415),se=n(430),je=n(8),le={primary:"primary",danger:"error"},de=function(e){var t=e.children,n=e.onClick,r=e.color;return Object(h.jsx)(I.a,{variant:"contained",color:le[r||"primary"],size:"large",onClick:n,children:t})},ue=n(219),be=n.n(ue),Oe=n(407),xe=n(420),he=n(422),pe=n(423),me=n(419);function fe(e){var t=e.children,n=e.onClose,r=e.isOpen,c=Object(g.a)((function(e){return e.breakpoints.down("sm")}));return Object(h.jsx)(Oe.a,{open:r,children:Object(h.jsxs)(me.a,{sx:c?{position:"absolute",inset:"0 0 0 0",bgcolor:"background.paper",p:1}:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",p:4},children:[Object(h.jsx)(xe.a,{action:n&&Object(h.jsx)(he.a,{onClick:n,children:Object(h.jsx)(be.a,{})}),title:"Edit word"}),Object(h.jsx)(pe.a,{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:t})]})})}var ge=n(404);function ve(e){return Object(h.jsx)(ge.a,Object(d.a)(Object(d.a)({},e),{},{multiline:!0,variant:"outlined"}))}var we,ye=function(){var e=V("word"),t=Object(l.a)(e,2),n=t[0],r=t[1],c=V("definition"),i=Object(l.a)(c,2),a=i[0],o=i[1],s=V("example"),j=Object(l.a)(s,2),d=j[0],u=j[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ve,{value:n,onChange:function(e){var t=e.target;return r(t.value)}}),Object(h.jsx)(ve,{value:a,onChange:function(e){var t=e.target;return o(t.value)}}),Object(h.jsx)(ve,{value:d,onChange:function(e){var t=e.target;return u(t.value)}})]})};function Se(e,t){var n=e.data.count,r=25*t.length;if(n>r)return r}var ke=function(){var e=Object(j.useInfiniteQuery)("words",(function(e){var t=e.pageParam,n=void 0===t?0:t;return O.get("/word",{params:{skip:n,limit:25}})}),{getNextPageParam:Se}),t=e.data,n=e.fetchNextPage,r=e.hasNextPage,c=e.refetch,a=(null===t||void 0===t?void 0:t.pages.reduce((function(e,t){return e.concat(t.data.words)}),[]))||[],o=Object(j.useMutation)((function(e){return O.delete("/word/delete?id=".concat(e))})).mutate,s=Object(j.useMutation)((function(e){return O.patch("/word/update",e)}),{onSuccess:function(){return Z.invalidateQueries("words",{refetchInactive:!0})}}),d=s.mutate,u=Object(i.c)(),b=Object(l.a)(u,2),x=b[0],p=b[1],m=Object.fromEntries(x.entries()),f=m._id,g=m.word,v=m.definition,w=m.example;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(fe,{isOpen:Boolean(f),onClose:function(){return p({})},children:[Object(h.jsx)(ye,{}),Object(h.jsx)(de,{color:"danger",onClick:function(){o(f,{onSuccess:function(){c()}}),p({})},children:"Delete"}),Object(h.jsx)(de,{onClick:function(){d({_id:f,word:g,definition:v,example:w},{onSuccess:function(){c()}}),p({})},children:"Save"})]}),Object(h.jsx)($.a,{dataLength:a.length,next:n,hasMore:Boolean(r),loader:Object(h.jsx)(ee.a,{active:!0}),children:Object(h.jsx)(ce.a,{component:oe.a,sx:{padding:0},children:Object(h.jsxs)(te.a,{size:"small",children:[Object(h.jsx)(ie.a,{children:Object(h.jsxs)(ae.a,{children:[Object(h.jsx)(Ie,{children:"Word"}),Object(h.jsx)(Ie,{children:"Definition/Example"})]})}),Object(h.jsx)(ne.a,{children:a.map((function(e){var t=e._id,n=e.word,r=e.definition,c=void 0===r?"":r,i=e.example,a=void 0===i?"":i;return Object(h.jsxs)(ae.a,{onClick:function(){return p(new URLSearchParams({_id:t,word:n,definition:c,example:a}))},children:[Object(h.jsx)(Ie,{component:"th",scope:"row",children:n}),Object(h.jsxs)(Ie,{children:[c,Boolean(c&&a)&&Object(h.jsx)(se.a,{sx:{margin:"4px"}}),Object(h.jsx)("i",{children:a})]})]},t)}))})]})})})]})},Ie=Object(je.a)(re.a)(we||(we=Object(Y.a)(["\n  font-size: 12px;\n  padding: 4px 8px;\n"]))),Ce=n(35),Ee=n(19),Le=n(30),Pe=n(421),Te=n(432),Fe=function(e){var t=e.word,n=e.definition,r=e.example,c=e.synonyms,a=Boolean(c.length)?" : "+JSON.stringify(c):"",o=": ".concat(n.toLowerCase()).concat(a),s="/add-word?word=".concat(t,"&definition=").concat(o||"","&example=").concat(r||""),j=J(),l=j.mutate,d=j.isLoading;function u(){return(u=Object(Le.a)(Object(Ee.a)().mark((function e(){return Object(Ee.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({word:t,definition:o,example:r});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)(y.a,{sx:{mb:1},children:Object(h.jsxs)(me.a,{variant:"outlined",children:[Object(h.jsxs)(pe.a,{children:[Object(h.jsx)(Pe.a,{variant:"body1",children:o}),r&&Object(h.jsx)(Pe.a,{sx:{mb:1.5},variant:"body2",color:"text.secondary",children:Object(h.jsx)("ul",{children:Object(h.jsx)("li",{children:Object(h.jsx)("i",{children:r})})})})]}),Object(h.jsxs)(Te.a,{children:[Object(h.jsx)(I.a,{component:i.b,to:s,size:"large",children:"Add"}),Object(h.jsx)(I.a,{disabled:d,onClick:function(){return u.apply(this,arguments)},size:"large",children:d?"Adding...":"Quick Add"})]})]})})},Ae=n(424),Be=["word"],We=function(e){var t=e.isLoading,n=e.isError,r=e.isSuccess,c=e.data;return n?Object(h.jsx)("span",{children:"Error occured"}):t?Object(h.jsx)("span",{children:"Loading..."}):c.length?r?Object(h.jsx)(h.Fragment,{children:c.map((function(e){var t=e.word;return Object(Ce.a)(e,Be).meanings.map((function(e,n){return Object(h.jsxs)(y.a,{children:[Object(h.jsx)(Pe.a,{variant:"h5",children:e.partOfSpeech}),e.definitions.map((function(e,n){return Object(h.jsx)(Fe,{word:t,definition:e.definition,synonyms:e.synonyms,example:e.example},n)}))]},n)}))}))}):Object(h.jsx)("span",{children:"Enter some word to see it definition"}):Object(h.jsx)("span",{children:'"Empty data'})},Ue=function(){var e=V("word"),t=Object(l.a)(e,2),n=t[0],r=t[1],c=G(n),i=c.isError,a=c.isLoading,o=c.isSuccess,s=c.data;return Object(h.jsxs)(y.a,{children:[Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);r(t.get("word"))},children:Object(h.jsx)(Ae.a,{fullWidth:!0,children:Object(h.jsx)(ge.a,{variant:"standard",name:"word",defaultValue:n,autoFocus:!0,margin:"normal"})})}),Object(h.jsx)(We,{isLoading:a,isError:i,isSuccess:o,data:s})]})};function qe(e){var t=e.children,n=Object(w.l)();return f().isAuthenticated?t:Object(h.jsx)(w.a,{to:"/login",state:{from:n}})}var De=function(){return Object(h.jsx)(w.e,{children:Object(h.jsxs)(w.c,{element:Object(h.jsx)(E,{}),children:[Object(h.jsx)(w.c,{path:"/",element:Object(h.jsx)(qe,{children:Object(h.jsx)(Ue,{})})}),Object(h.jsx)(w.c,{path:"/add-word",element:Object(h.jsx)(qe,{children:Object(h.jsx)(X,{})})}),Object(h.jsx)(w.c,{path:"/my-words",element:Object(h.jsx)(qe,{children:Object(h.jsx)(ke,{})})}),Object(h.jsx)(w.c,{path:"/dictionary",element:Object(h.jsx)(Ue,{})}),Object(h.jsx)(w.c,{path:"/signup",element:Object(h.jsx)(_,{})}),Object(h.jsx)(w.c,{path:"/login",element:Object(h.jsx)(M,{})})]})})},Me=n(220),Qe=function(){var e=Object(g.a)("(prefers-color-scheme: dark)"),t=Object(o.a)({palette:{mode:e?"dark":"light"}}),n=new j.QueryClient;return Object(h.jsx)(a.StrictMode,{children:Object(h.jsxs)(s.a,{theme:t,children:[Object(h.jsxs)(j.QueryClientProvider,{client:n,children:[Object(h.jsx)(m,{children:Object(h.jsx)(i.a,{children:Object(h.jsx)(De,{})})}),Object(h.jsx)(Me.ReactQueryDevtools,{initialIsOpen:!1})]}),Object(h.jsx)(v.a,{})]})})};c.a.render(Object(h.jsx)(Qe,{}),document.getElementById("root"))}},[[342,1,2]]]);
//# sourceMappingURL=main.26e4fe7b.chunk.js.map