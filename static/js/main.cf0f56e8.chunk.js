(this["webpackJsonpwashoe-app"]=this["webpackJsonpwashoe-app"]||[]).push([[0],{350:function(e,t,n){},351:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(44),i=n.n(a),o=n(61),s=n(4),d=n(18),j=n(226),l=n(403),u=n(69),b=n(3),h=n(150),O=n.n(h),x=O.a.create({baseURL:"https://api.streltsov.rocks:3001/api/v1"});x.interceptors.request.use((function(e){return Object(b.a)(Object(b.a)({},e),{},{headers:Object(b.a)(Object(b.a)({},e.headers),{},{authorization:localStorage.getItem("token")})})}),(function(e){return Promise.reject(e)}));var m=n(228),p=n(5),g=Object(r.createContext)({}),f=function(e){var t=e.children,n=Object(r.useState)((function(){return Boolean(localStorage.token)})),c=Object(s.a)(n,2),a=c[0],i=c[1];window.onstorage=function(e){var t=e.key,n=e.newValue;return"token"===t&&i(Boolean(n))};var o=Object(u.useMutation)((function(e){return x.post("/user/login",e)}),{onSuccess:function(e){var t=e.data.token;i(Boolean(t)),localStorage.setItem("token",t)},onError:function(){m.b.error("Something went wrong")}}),d=o.mutate,j=o.isLoading,l=Object(u.useMutation)((function(e){return x.post("/user/signup",e)}),{onSuccess:function(e){var t=e.data.token;i(Boolean(t)),localStorage.setItem("token",t)},onError:function(){m.b.error("Something went wrong")}}),b=l.mutate,h={isAuthenticated:a,isLoggingIn:j,logIn:d,isSigningUp:l.isLoading,signUp:b};return Object(p.jsx)(g.Provider,{value:h,children:t})},v=function(){return Object(r.useContext)(g)},w=n(404),y=function(e){var t=e.children;return Object(p.jsx)(w.a,{children:t})},S=n(394),I=n(398),k=n(231),E=n(397),L=n(227),P=n(98),T=n(410),F=n(411),A=I.a.Title,B=I.a.Text,C=function(e){var t=e.onLogIn;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(k.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(p.jsx)(A,{level:3,children:"Log In"}),Object(p.jsx)(B,{type:"secondary",children:"to continue to Washoe"})]}),Object(p.jsxs)(E.a,{onFinish:t,children:[Object(p.jsx)(E.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(p.jsx)(L.a,{prefix:Object(p.jsx)(T.a,{}),placeholder:"Email"})}),Object(p.jsx)(E.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(p.jsx)(L.a.Password,{prefix:Object(p.jsx)(F.a,{}),placeholder:"Password"})}),Object(p.jsx)(E.a.Item,{children:Object(p.jsx)(P.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Log In"})})]}),Object(p.jsx)(k.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(p.jsxs)(B,{children:["New to Washoe? ",Object(p.jsx)(o.b,{to:"/signup",children:"Create an account"})]})})]})};var W=function(){var e=v(),t=e.logIn;return function(e){var t,n,c=Object(d.l)().state,a=Object(d.n)(),i=(null===c||void 0===c||null===(t=c.from)||void 0===t?void 0:t.pathname)+(null===c||void 0===c||null===(n=c.from)||void 0===n?void 0:n.search)||"/";Object(r.useEffect)((function(){e&&a(i,{replace:!0})}),[e,i,a])}(e.isAuthenticated),Object(p.jsx)(C,{onLogIn:t})},q=I.a.Title,M=I.a.Text,U=function(e){var t=e.onSignUp;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(k.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(p.jsx)(q,{level:3,children:"Sign Up"}),Object(p.jsx)(M,{type:"secondary",children:"to continue to Washoe"})]}),Object(p.jsxs)(E.a,{onFinish:t,children:[Object(p.jsx)(E.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(p.jsx)(L.a,{prefix:Object(p.jsx)(T.a,{}),placeholder:"Email"})}),Object(p.jsx)(E.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(p.jsx)(L.a.Password,{prefix:Object(p.jsx)(F.a,{}),placeholder:"Password"})}),Object(p.jsx)(E.a.Item,{children:Object(p.jsx)(P.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Sign Up"})})]}),Object(p.jsx)(k.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(p.jsxs)(M,{children:["Already have an account? ",Object(p.jsx)(o.b,{to:"/login",children:"Log In"})]})})]})},D=function(){var e=v().signUp;return Object(p.jsx)(U,{onSignUp:e})},N=function(){return Object(u.useMutation)((function(e){return x.post("/word/create",e)}))},Q=n(2);function V(e){var t=Object(o.c)(),n=Object(s.a)(t,2),r=n[0],c=n[1];return[r.get(e)||"",function(t){var n=Object.fromEntries(r),a=Object(Q.a)({},e,t),i=Object(b.a)(Object(b.a)({},n),a);c(i,{replace:!0})}]}var z=function(e){return Object(u.useQuery)(["get-definition",e],(function(){return function(e){return O.a.get("https://api.dictionaryapi.dev/api/v2/entries/en/"+e).then((function(e){return e.data}))}(e)}),{refetchOnWindowFocus:!1,cacheTime:1/0,enabled:Boolean(e),initialData:[]})},J=I.a.Title,H=function(){var e=V("word"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=V("definition"),a=Object(s.a)(c,2),i=a[0],o=a[1],d=V("example"),j=Object(s.a)(d,2),l=j[0],u=j[1],h=N(),O=h.mutate,x=h.isLoading,g=E.a.useForm(),f=Object(s.a)(g,1)[0];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Oe,{}),Object(p.jsxs)(y,{children:[Object(p.jsx)(J,{level:3,children:"Add a Word"}),Object(p.jsxs)(E.a,{form:f,initialValues:{word:n,definition:i,example:l},onFinish:function(e){O(function(e){var t=e.word,n=e.definition,r=e.example;return Object(b.a)(Object(b.a)({word:t},n?{definition:n}:{}),r?{example:r}:{})}(e),{onSuccess:function(){m.b.success("Success!"),f.resetFields()},onError:function(){m.b.error("Something went wrong")}})},children:[Object(p.jsx)(E.a.Item,{name:"word",required:!0,children:Object(p.jsx)(L.a,{onChange:function(e){var t=e.currentTarget;return r(t.value)},disabled:x,placeholder:"Word"})}),Object(p.jsx)(E.a.Item,{name:"definition",required:!0,children:Object(p.jsx)(L.a.TextArea,{onChange:function(e){var t=e.currentTarget;return o(t.value)},disabled:x,placeholder:"Definition"})}),Object(p.jsx)(E.a.Item,{name:"example",required:!0,children:Object(p.jsx)(L.a.TextArea,{onChange:function(e){var t=e.currentTarget;return u(t.value)},disabled:x,placeholder:"Example"})}),Object(p.jsx)(P.a,{loading:x,type:"primary",htmlType:"submit",style:{width:"100%"},children:"Add"})]})]})]})},K=n(221),R=n(400),_=n(395),G=[{title:Object(p.jsx)("strong",{children:"Word"}),dataIndex:"word",key:"word"},{title:Object(p.jsx)("strong",{children:"Definition"}),dataIndex:"definition",key:"definition"},{title:Object(p.jsx)("strong",{children:"Example"}),dataIndex:"example",key:"example"}];function X(e,t){var n=e.data.count,r=25*t.length;if(n>r)return r}var Y=function(){var e=Object(u.useInfiniteQuery)("words",(function(e){var t=e.pageParam,n=void 0===t?0:t;return x.get("/word",{params:{skip:n,limit:25}})}),{getNextPageParam:X}),t=e.data,n=e.fetchNextPage,r=e.hasNextPage,c=e.status,a=(null===t||void 0===t?void 0:t.pages.reduce((function(e,t){return e.concat(t.data.words)}),[]))||[];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Oe,{}),Object(p.jsx)(K.a,{dataLength:a.length,next:n,hasMore:Boolean(r),loader:Object(p.jsx)(R.a,{active:!0}),children:Object(p.jsx)(_.a,{columns:G,dataSource:a,rowKey:function(e){return e._id},pagination:!1,bordered:!0,loading:"loading"===c,sticky:!0})})]})},Z=n(10),$=n(21),ee=n(40),te=n(405),ne=n(407),re=n(408),ce=n(409),ae=n(399),ie=function(e){var t=e.word,n=e.definition,r=e.example,c=e.synonyms,a=Boolean(c.length)?" : "+JSON.stringify(c):"",i=": ".concat(n.toLowerCase()).concat(a),s="/add-word?word=".concat(t,"&definition=").concat(i||"","&example=").concat(r||""),d=N(),j=d.mutate,l=d.isLoading;function u(){return(u=Object(ee.a)(Object($.a)().mark((function e(){return Object($.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j({word:t,definition:i,example:r});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsx)(w.a,{sx:{mb:1},children:Object(p.jsxs)(te.a,{variant:"outlined",children:[Object(p.jsxs)(ne.a,{children:[Object(p.jsx)(re.a,{variant:"body1",children:i}),r&&Object(p.jsx)(re.a,{sx:{mb:1.5},variant:"body2",color:"text.secondary",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("i",{children:r})})})})]}),Object(p.jsxs)(ce.a,{children:[Object(p.jsx)(ae.a,{component:o.b,to:s,size:"large",children:"Add"}),Object(p.jsx)(ae.a,{disabled:l,onClick:function(){return u.apply(this,arguments)},size:"large",children:l?"Adding...":"Quick Add"})]})]})})},oe=n(401),se=n(396),de=["word"],je=function(e){var t=e.isLoading,n=e.isError,r=e.isSuccess,c=e.data;return n?Object(p.jsx)("span",{children:"Error occured"}):t?Object(p.jsx)("span",{children:"Loading..."}):c.length?r?Object(p.jsx)(p.Fragment,{children:c.map((function(e){var t=e.word;return Object(Z.a)(e,de).meanings.map((function(e,n){return Object(p.jsxs)(w.a,{children:[Object(p.jsx)(re.a,{variant:"h5",children:e.partOfSpeech}),e.definitions.map((function(e,n){return Object(p.jsx)(ie,{word:t,definition:e.definition,synonyms:e.synonyms,example:e.example},n)}))]},n)}))}))}):Object(p.jsx)("span",{children:"Enter some word to see it definition"}):Object(p.jsx)("span",{children:'"Empty data'})},le=function(){var e=V("word"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=z(n),a=c.isError,i=c.isLoading,o=c.isSuccess,d=c.data;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Oe,{}),Object(p.jsx)(w.a,{sx:{mb:4},component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);r(t.get("word"))},noValidate:!0,children:Object(p.jsx)(oe.a,{fullWidth:!0,children:Object(p.jsx)(se.a,{variant:"standard",name:"word",defaultValue:n,autoFocus:!0,margin:"normal"})})}),Object(p.jsx)(je,{isLoading:i,isError:a,isSuccess:o,data:d})]})};function ue(){return v().isAuthenticated?Object(p.jsx)(w.a,{sx:{p:2},children:Object(p.jsx)(d.b,{})}):Object(p.jsx)(y,{children:Object(p.jsx)(d.b,{})})}function be(e){var t=e.children,n=Object(d.l)();return v().isAuthenticated?t:Object(p.jsx)(d.a,{to:"/login",state:{from:n}})}var he=function(){return Object(p.jsx)(le,{})},Oe=function(){return Object(p.jsxs)(S.a,{direction:"row",gap:2,mb:4,children:[Object(p.jsx)(o.b,{to:"/",children:"Home"}),Object(p.jsx)(o.b,{to:"/add-word",children:"Add Word"}),Object(p.jsx)(o.b,{to:"/my-words",children:"My Words"})]})},xe=function(){var e=new u.QueryClient,t=Object(r.useState)("dark"),n=Object(s.a)(t,2),c=n[0],a=n[1];matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){return a(e.matches?"dark":"light")}));var i=Object(r.useMemo)((function(){return Object(j.a)({palette:{mode:c}})}),[c]);return Object(p.jsx)(l.a,{theme:i,children:Object(p.jsx)(u.QueryClientProvider,{client:e,children:Object(p.jsx)(f,{children:Object(p.jsx)(d.e,{children:Object(p.jsxs)(d.c,{element:Object(p.jsx)(ue,{}),children:[Object(p.jsx)(d.c,{path:"/",element:Object(p.jsx)(be,{children:Object(p.jsx)(he,{})})}),Object(p.jsx)(d.c,{path:"/add-word",element:Object(p.jsx)(be,{children:Object(p.jsx)(H,{})})}),Object(p.jsx)(d.c,{path:"/my-words",element:Object(p.jsx)(be,{children:Object(p.jsx)(Y,{})})}),Object(p.jsx)(d.c,{path:"/dictionary",element:Object(p.jsx)(le,{})}),Object(p.jsx)(d.c,{path:"/signup",element:Object(p.jsx)(D,{})}),Object(p.jsx)(d.c,{path:"/login",element:Object(p.jsx)(W,{})})]})})})})})},me=(n(350),document.getElementById("root"));i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(o.a,{children:Object(p.jsx)(xe,{})})}),me)}},[[351,1,2]]]);
//# sourceMappingURL=main.cf0f56e8.chunk.js.map