(this["webpackJsonpwashoe-app"]=this["webpackJsonpwashoe-app"]||[]).push([[0],{359:function(e,t,n){},360:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(43),c=n.n(i),o=n(70),s=n(4),d=n(18),j=n(233),l=n(412),u=n(73),b=n(3),h=n(156),O=n.n(h),x=O.a.create({baseURL:"http://5.135.148.20:3001/api/v1"});x.interceptors.request.use((function(e){return Object(b.a)(Object(b.a)({},e),{},{headers:Object(b.a)(Object(b.a)({},e.headers),{},{authorization:localStorage.getItem("token")})})}),(function(e){return Promise.reject(e)}));var m=n(237),p=n(6),f=Object(r.createContext)({}),g=function(e){var t=e.children,n=Object(r.useState)((function(){return Boolean(localStorage.token)})),a=Object(s.a)(n,2),i=a[0],c=a[1];window.onstorage=function(e){var t=e.key,n=e.newValue;return"token"===t&&c(Boolean(n))};var o=Object(u.useMutation)((function(e){return x.post("/user/login",e)}),{onSuccess:function(e){var t=e.data.token;c(Boolean(t)),localStorage.setItem("token",t)},onError:function(){m.b.error("Something went wrong")}}),d=o.mutate,j=o.isLoading,l=Object(u.useMutation)((function(e){return x.post("/user/signup",e)}),{onSuccess:function(e){var t=e.data.token;c(Boolean(t)),localStorage.setItem("token",t)},onError:function(){m.b.error("Something went wrong")}}),b=l.mutate,h={isAuthenticated:i,isLoggingIn:j,logIn:d,isSigningUp:l.isLoading,signUp:b};return Object(p.jsx)(f.Provider,{value:h,children:t})},v=function(){return Object(r.useContext)(f)},w=n(409),y=function(e){var t=e.children;return Object(p.jsx)(w.a,{visible:!0,mask:!1,closable:!1,footer:null,children:t})},S=n(413),I=n(406),k=n(240),E=n(405),L=n(235),P=n(69),T=n(419),F=n(420),A=I.a.Title,B=I.a.Text,C=function(e){var t=e.onLogIn;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(k.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(p.jsx)(A,{level:3,children:"Log In"}),Object(p.jsx)(B,{type:"secondary",children:"to continue to Washoe"})]}),Object(p.jsxs)(E.a,{onFinish:t,children:[Object(p.jsx)(E.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(p.jsx)(L.a,{prefix:Object(p.jsx)(T.a,{}),placeholder:"Email"})}),Object(p.jsx)(E.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(p.jsx)(L.a.Password,{prefix:Object(p.jsx)(F.a,{}),placeholder:"Password"})}),Object(p.jsx)(E.a.Item,{children:Object(p.jsx)(P.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Log In"})})]}),Object(p.jsx)(k.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(p.jsxs)(B,{children:["New to Washoe? ",Object(p.jsx)(o.b,{to:"/signup",children:"Create an account"})]})})]})};var q=function(){var e=v(),t=e.logIn;return function(e){var t,n,a=Object(d.l)().state,i=Object(d.n)(),c=(null===a||void 0===a||null===(t=a.from)||void 0===t?void 0:t.pathname)+(null===a||void 0===a||null===(n=a.from)||void 0===n?void 0:n.search)||"/";Object(r.useEffect)((function(){e&&i(c,{replace:!0})}),[e,c,i])}(e.isAuthenticated),Object(p.jsx)(C,{onLogIn:t})},U=I.a.Title,W=I.a.Text,M=function(e){var t=e.onSignUp;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(k.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(p.jsx)(U,{level:3,children:"Sign Up"}),Object(p.jsx)(W,{type:"secondary",children:"to continue to Washoe"})]}),Object(p.jsxs)(E.a,{onFinish:t,children:[Object(p.jsx)(E.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(p.jsx)(L.a,{prefix:Object(p.jsx)(T.a,{}),placeholder:"Email"})}),Object(p.jsx)(E.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(p.jsx)(L.a.Password,{prefix:Object(p.jsx)(F.a,{}),placeholder:"Password"})}),Object(p.jsx)(E.a.Item,{children:Object(p.jsx)(P.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Sign Up"})})]}),Object(p.jsx)(k.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(p.jsxs)(W,{children:["Already have an account? ",Object(p.jsx)(o.b,{to:"/login",children:"Log In"})]})})]})},D=function(){var e=v().signUp;return Object(p.jsx)(M,{onSignUp:e})},N=function(){return Object(u.useMutation)((function(e){return x.post("/word/create",e)}))},Q=n(2);function V(e){var t=Object(o.c)(),n=Object(s.a)(t,2),r=n[0],a=n[1];return[r.get(e)||"",function(t){var n=Object.fromEntries(r),i=Object(Q.a)({},e,t),c=Object(b.a)(Object(b.a)({},n),i);a(c,{replace:!0})}]}var z=function(e){return Object(u.useQuery)(["get-definition",e],(function(){return function(e){return O.a.get("https://api.dictionaryapi.dev/api/v2/entries/en/"+e).then((function(e){return e.data}))}(e)}),{refetchOnWindowFocus:!1,cacheTime:1/0,enabled:Boolean(e),initialData:[]})},J=I.a.Title,K=function(){var e=V("word"),t=Object(s.a)(e,2),n=t[0],r=t[1],a=V("definition"),i=Object(s.a)(a,2),c=i[0],o=i[1],d=V("example"),j=Object(s.a)(d,2),l=j[0],u=j[1],h=N(),O=h.mutate,x=h.isLoading,f=E.a.useForm(),g=Object(s.a)(f,1)[0];return Object(p.jsxs)(y,{children:[Object(p.jsx)(J,{level:3,children:"Add a Word"}),Object(p.jsxs)(E.a,{form:g,initialValues:{word:n,definition:c,example:l},onFinish:function(e){O(function(e){var t=e.word,n=e.definition,r=e.example;return Object(b.a)(Object(b.a)({word:t},n?{definition:n}:{}),r?{example:r}:{})}(e),{onSuccess:function(){m.b.success("Success!"),g.resetFields()},onError:function(){m.b.error("Something went wrong")}})},children:[Object(p.jsx)(E.a.Item,{name:"word",required:!0,children:Object(p.jsx)(L.a,{onChange:function(e){var t=e.currentTarget;return r(t.value)},disabled:x,placeholder:"Word"})}),Object(p.jsx)(E.a.Item,{name:"definition",required:!0,children:Object(p.jsx)(L.a.TextArea,{onChange:function(e){var t=e.currentTarget;return o(t.value)},disabled:x,placeholder:"Definition"})}),Object(p.jsx)(E.a.Item,{name:"example",required:!0,children:Object(p.jsx)(L.a.TextArea,{onChange:function(e){var t=e.currentTarget;return u(t.value)},disabled:x,placeholder:"Example"})}),Object(p.jsx)(P.a,{loading:x,type:"primary",htmlType:"submit",style:{width:"100%"},children:"Add"})]})]})},R=n(226),_=n(408),G=n(403),H=[{title:Object(p.jsx)("strong",{children:"Word"}),dataIndex:"word",key:"word"},{title:Object(p.jsx)("strong",{children:"Definition"}),dataIndex:"definition",key:"definition"},{title:Object(p.jsx)("strong",{children:"Example"}),dataIndex:"example",key:"example"}];function X(e,t){var n=e.data.count,r=25*t.length;if(n>r)return r}var Y=function(){var e=Object(u.useInfiniteQuery)("words",(function(e){var t=e.pageParam,n=void 0===t?0:t;return x.get("/word",{params:{skip:n,limit:25}})}),{getNextPageParam:X}),t=e.data,n=e.fetchNextPage,r=e.hasNextPage,a=e.status,i=(null===t||void 0===t?void 0:t.pages.reduce((function(e,t){return e.concat(t.data.words)}),[]))||[];return Object(p.jsx)(R.a,{dataLength:i.length,next:n,hasMore:Boolean(r),loader:Object(p.jsx)(_.a,{active:!0}),children:Object(p.jsx)(G.a,{columns:H,dataSource:i,rowKey:function(e){return e._id},pagination:!1,bordered:!0,loading:"loading"===a,sticky:!0})})},Z=n(10),$=n(21),ee=n(41),te=n(414),ne=n(416),re=n(417),ae=n(418),ie=n(407),ce=function(e){var t=e.word,n=e.definition,r=e.example,a=e.synonyms,i=Boolean(a.length)?" : "+JSON.stringify(a):"",c=": ".concat(n.toLowerCase()).concat(i),s="/add-word?word=".concat(t,"&definition=").concat(c||"","&example=").concat(r||""),d=N(),j=d.mutate,l=d.isLoading;function u(){return(u=Object(ee.a)(Object($.a)().mark((function e(){return Object($.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j({word:t,definition:c,example:r});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsx)(S.a,{sx:{mb:1},children:Object(p.jsxs)(te.a,{variant:"outlined",children:[Object(p.jsxs)(ne.a,{children:[Object(p.jsx)(re.a,{variant:"body1",children:c}),r&&Object(p.jsx)(re.a,{sx:{mb:1.5},variant:"body2",color:"text.secondary",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("i",{children:r})})})})]}),Object(p.jsxs)(ae.a,{children:[Object(p.jsx)(ie.a,{component:o.b,to:s,size:"large",children:"Add"}),Object(p.jsx)(ie.a,{disabled:l,onClick:function(){return u.apply(this,arguments)},size:"large",children:l?"Adding...":"Quick Add"})]})]})})},oe=n(410),se=n(404),de=["word"],je=function(e){var t=e.isLoading,n=e.isError,r=e.isSuccess,a=e.data;return n?Object(p.jsx)("span",{children:"Error occured"}):t?Object(p.jsx)("span",{children:"Loading..."}):a.length?r?Object(p.jsx)(p.Fragment,{children:a.map((function(e){var t=e.word;return Object(Z.a)(e,de).meanings.map((function(e,n){return Object(p.jsxs)(S.a,{children:[Object(p.jsx)(re.a,{variant:"h5",children:e.partOfSpeech}),e.definitions.map((function(e,n){return Object(p.jsx)(ce,{word:t,definition:e.definition,synonyms:e.synonyms,example:e.example},n)}))]},n)}))}))}):Object(p.jsx)("span",{children:"Enter some word to see it definition"}):Object(p.jsx)("span",{children:'"Empty data'})},le=function(){var e=V("word"),t=Object(s.a)(e,2),n=t[0],r=t[1],a=z(n),i=a.isError,c=a.isLoading,o=a.isSuccess,d=a.data;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(S.a,{sx:{mb:4},component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);r(t.get("word"))},noValidate:!0,children:Object(p.jsx)(oe.a,{fullWidth:!0,children:Object(p.jsx)(se.a,{variant:"standard",name:"word",defaultValue:n,autoFocus:!0,margin:"normal"})})}),Object(p.jsx)(je,{isLoading:c,isError:i,isSuccess:o,data:d})]})};function ue(){return v().isAuthenticated?Object(p.jsx)(S.a,{sx:{p:2},children:Object(p.jsx)(d.b,{})}):Object(p.jsx)(y,{children:Object(p.jsx)(d.b,{})})}function be(e){var t=e.children,n=Object(d.l)();return v().isAuthenticated?t:Object(p.jsx)(d.a,{to:"/login",state:{from:n}})}var he=function(){return Object(p.jsx)(le,{})},Oe=function(){var e=new u.QueryClient,t=Object(r.useState)("dark"),n=Object(s.a)(t,2),a=n[0],i=n[1];matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){return i(e.matches?"dark":"light")}));var c=Object(r.useMemo)((function(){return Object(j.a)({palette:{mode:a}})}),[a]);return Object(p.jsx)(l.a,{theme:c,children:Object(p.jsx)(u.QueryClientProvider,{client:e,children:Object(p.jsx)(g,{children:Object(p.jsx)(d.e,{children:Object(p.jsxs)(d.c,{element:Object(p.jsx)(ue,{}),children:[Object(p.jsx)(d.c,{path:"/",element:Object(p.jsx)(be,{children:Object(p.jsx)(he,{})})}),Object(p.jsx)(d.c,{path:"/add-word",element:Object(p.jsx)(be,{children:Object(p.jsx)(K,{})})}),Object(p.jsx)(d.c,{path:"/my-words",element:Object(p.jsx)(be,{children:Object(p.jsx)(Y,{})})}),Object(p.jsx)(d.c,{path:"/dictionary",element:Object(p.jsx)(le,{})}),Object(p.jsx)(d.c,{path:"/signup",element:Object(p.jsx)(D,{})}),Object(p.jsx)(d.c,{path:"/login",element:Object(p.jsx)(q,{})})]})})})})})},xe=(n(359),document.getElementById("root"));c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(o.a,{children:Object(p.jsx)(Oe,{})})}),xe)}},[[360,1,2]]]);
//# sourceMappingURL=main.dced971c.chunk.js.map