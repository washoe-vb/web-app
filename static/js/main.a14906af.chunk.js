(this["webpackJsonpwashoe-app"]=this["webpackJsonpwashoe-app"]||[]).push([[0],{326:function(e,t,n){"use strict";n.r(t);var r=n(34),c=n.n(r),a=n(43),i=n(0),s=n(209),o=n(385),j=n(59),d=n(4),l=n(5),u=n(133),b=n.n(u),x=b.a.create({baseURL:"https://api.streltsov.rocks:3001/api/v1"});x.interceptors.request.use((function(e){return Object(l.a)(Object(l.a)({},e),{},{headers:Object(l.a)(Object(l.a)({},e.headers),{},{authorization:localStorage.getItem("token")})})}),(function(e){return Promise.reject(e)}));var h=n(211),O=n(3),p=Object(i.createContext)({}),m=function(e){var t=e.children,n=Object(i.useState)((function(){return Boolean(localStorage.token)})),r=Object(d.a)(n,2),c=r[0],a=r[1];window.onstorage=function(e){var t=e.key,n=e.newValue;return"token"===t&&a(Boolean(n))};var s=Object(j.useMutation)((function(e){return x.post("/user/login",e)}),{onSuccess:function(e){var t=e.data.token;a(Boolean(t)),localStorage.setItem("token",t)},onError:function(){h.b.error("Something went wrong")}}),o=s.mutate,l=s.isLoading,u=Object(j.useMutation)((function(e){return x.post("/user/signup",e)}),{onSuccess:function(e){var t=e.data.token;a(Boolean(t)),localStorage.setItem("token",t)},onError:function(){h.b.error("Something went wrong")}}),b=u.mutate,m={isAuthenticated:c,isLoggingIn:l,logIn:o,isSigningUp:u.isLoading,signUp:b};return Object(O.jsx)(p.Provider,{value:m,children:t})},f=function(){return Object(i.useContext)(p)},g=n(377),v=n(376),w=n(17),y=n(389),S=n(386),I=n(388),E=n(381),k=function(){return Object(O.jsxs)(S.a,{position:"fixed",component:"nav",children:[Object(O.jsxs)(I.a,{children:[Object(O.jsx)(E.a,{component:a.b,to:"/",children:"Washoe"}),Object(O.jsxs)(y.a,{ml:"auto",display:"flex",gap:1,children:[Object(O.jsx)(E.a,{component:a.b,to:"/add-word",children:"Add Word"}),Object(O.jsx)(E.a,{component:a.b,to:"/my-words",children:"My Words"})]})]}),Object(O.jsx)(v.a,{})]})},T=function(){return f().isAuthenticated?Object(O.jsxs)(y.a,{sx:{marginTop:"64px"},children:[Object(O.jsx)(k,{}),Object(O.jsx)(w.b,{})]}):Object(O.jsx)(w.b,{})},L=n(380),P=n(390),F=n(379),A=n(383),B=n(210),C=n(402),W=n(403),q=L.a.Title,U=L.a.Text,M=function(e){var t=e.onLogIn;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(P.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(O.jsx)(q,{level:3,children:"Log In"}),Object(O.jsx)(U,{type:"secondary",children:"to continue to Washoe"})]}),Object(O.jsxs)(F.a,{onFinish:t,children:[Object(O.jsx)(F.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(O.jsx)(A.a,{prefix:Object(O.jsx)(C.a,{}),placeholder:"Email"})}),Object(O.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(O.jsx)(A.a.Password,{prefix:Object(O.jsx)(W.a,{}),placeholder:"Password"})}),Object(O.jsx)(F.a.Item,{children:Object(O.jsx)(B.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Log In"})})]}),Object(O.jsx)(P.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(O.jsxs)(U,{children:["New to Washoe? ",Object(O.jsx)(a.b,{to:"/signup",children:"Create an account"})]})})]})};var z=function(){var e=f(),t=e.logIn;return function(e){var t,n,r=Object(w.l)().state,c=Object(w.n)(),a=(null===r||void 0===r||null===(t=r.from)||void 0===t?void 0:t.pathname)+(null===r||void 0===r||null===(n=r.from)||void 0===n?void 0:n.search)||"/";Object(i.useEffect)((function(){e&&c(a,{replace:!0})}),[e,a,c])}(e.isAuthenticated),Object(O.jsx)(M,{onLogIn:t})},D=L.a.Title,N=L.a.Text,Q=function(e){var t=e.onSignUp;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(P.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(O.jsx)(D,{level:3,children:"Sign Up"}),Object(O.jsx)(N,{type:"secondary",children:"to continue to Washoe"})]}),Object(O.jsxs)(F.a,{onFinish:t,children:[Object(O.jsx)(F.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(O.jsx)(A.a,{prefix:Object(O.jsx)(C.a,{}),placeholder:"Email"})}),Object(O.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(O.jsx)(A.a.Password,{prefix:Object(O.jsx)(W.a,{}),placeholder:"Password"})}),Object(O.jsx)(F.a.Item,{children:Object(O.jsx)(B.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Sign Up"})})]}),Object(O.jsx)(P.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(O.jsxs)(N,{children:["Already have an account? ",Object(O.jsx)(a.b,{to:"/login",children:"Log In"})]})})]})},J=function(){var e=f().signUp;return Object(O.jsx)(Q,{onSignUp:e})},V=function(){return Object(j.useMutation)((function(e){return x.post("/word/create",e)}))},_=n(2);function R(e){var t=Object(a.c)(),n=Object(d.a)(t,2),r=n[0],c=n[1];return[r.get(e)||"",function(t){var n=Object.fromEntries(r),a=Object(_.a)({},e,t),i=Object(l.a)(Object(l.a)({},n),a);c(i,{replace:!0})}]}var G,H=function(e){return Object(j.useQuery)(["get-definition",e],(function(){return function(e){return b.a.get("https://api.dictionaryapi.dev/api/v2/entries/en/"+e).then((function(e){return e.data}))}(e)}),{refetchOnWindowFocus:!1,cacheTime:1/0,enabled:Boolean(e),initialData:[]})},K=function(e){var t=e.children;return Object(O.jsx)(y.a,{children:t})},X=L.a.Title,Y=function(){var e=R("word"),t=Object(d.a)(e,2),n=t[0],r=t[1],c=R("definition"),a=Object(d.a)(c,2),i=a[0],s=a[1],o=R("example"),j=Object(d.a)(o,2),u=j[0],b=j[1],x=V(),p=x.mutate,m=x.isLoading,f=F.a.useForm(),g=Object(d.a)(f,1)[0];return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(K,{children:[Object(O.jsx)(X,{level:3,children:"Add a Word"}),Object(O.jsxs)(F.a,{form:g,initialValues:{word:n,definition:i,example:u},onFinish:function(e){p(function(e){var t=e.word,n=e.definition,r=e.example;return Object(l.a)(Object(l.a)({word:t},n?{definition:n}:{}),r?{example:r}:{})}(e),{onSuccess:function(){h.b.success("Success!"),g.resetFields()},onError:function(){h.b.error("Something went wrong")}})},children:[Object(O.jsx)(F.a.Item,{name:"word",required:!0,children:Object(O.jsx)(A.a,{onChange:function(e){var t=e.currentTarget;return r(t.value)},disabled:m,placeholder:"Word"})}),Object(O.jsx)(F.a.Item,{name:"definition",required:!0,children:Object(O.jsx)(A.a.TextArea,{onChange:function(e){var t=e.currentTarget;return s(t.value)},disabled:m,placeholder:"Definition"})}),Object(O.jsx)(F.a.Item,{name:"example",required:!0,children:Object(O.jsx)(A.a.TextArea,{onChange:function(e){var t=e.currentTarget;return b(t.value)},disabled:m,placeholder:"Example"})}),Object(O.jsx)(B.a,{loading:m,type:"primary",htmlType:"submit",style:{width:"100%"},children:"Add"})]})]})})},Z=n(89),$=n(207),ee=n(382),te=n(392),ne=n(395),re=n(397),ce=n(391),ae=n(393),ie=n(394),se=n(387),oe=n(396),je=n(8);function de(e,t){var n=e.data.count,r=25*t.length;if(n>r)return r}var le=function(){var e=Object(j.useInfiniteQuery)("words",(function(e){var t=e.pageParam,n=void 0===t?0:t;return x.get("/word",{params:{skip:n,limit:25}})}),{getNextPageParam:de}),t=e.data,n=e.fetchNextPage,r=e.hasNextPage,c=(null===t||void 0===t?void 0:t.pages.reduce((function(e,t){return e.concat(t.data.words)}),[]))||[];return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)($.a,{dataLength:c.length,next:n,hasMore:Boolean(r),loader:Object(O.jsx)(ee.a,{active:!0}),children:Object(O.jsx)(ce.a,{component:se.a,sx:{padding:0},children:Object(O.jsxs)(te.a,{size:"small",children:[Object(O.jsx)(ae.a,{children:Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(ue,{children:"Word"}),Object(O.jsx)(ue,{children:"Definition/Example"})]})}),Object(O.jsx)(ne.a,{children:c.map((function(e){return Object(O.jsxs)(ie.a,{onClick:function(){return e._id,null},children:[Object(O.jsx)(ue,{component:"th",scope:"row",children:e.word}),Object(O.jsxs)(ue,{children:[e.definition,Boolean(e.definition&&e.example)&&Object(O.jsx)(oe.a,{sx:{margin:"4px"}}),Object(O.jsx)("i",{children:e.example})]})]},e._id)}))})]})})})})},ue=Object(je.a)(re.a)(G||(G=Object(Z.a)(["\n  font-size: 12px;\n  padding: 4px 8px;\n"]))),be=n(35),xe=n(18),he=n(30),Oe=n(398),pe=n(399),me=n(400),fe=n(401),ge=function(e){var t=e.word,n=e.definition,r=e.example,c=e.synonyms,i=Boolean(c.length)?" : "+JSON.stringify(c):"",s=": ".concat(n.toLowerCase()).concat(i),o="/add-word?word=".concat(t,"&definition=").concat(s||"","&example=").concat(r||""),j=V(),d=j.mutate,l=j.isLoading;function u(){return(u=Object(he.a)(Object(xe.a)().mark((function e(){return Object(xe.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d({word:t,definition:s,example:r});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsx)(y.a,{sx:{mb:1},children:Object(O.jsxs)(Oe.a,{variant:"outlined",children:[Object(O.jsxs)(pe.a,{children:[Object(O.jsx)(me.a,{variant:"body1",children:s}),r&&Object(O.jsx)(me.a,{sx:{mb:1.5},variant:"body2",color:"text.secondary",children:Object(O.jsx)("ul",{children:Object(O.jsx)("li",{children:Object(O.jsx)("i",{children:r})})})})]}),Object(O.jsxs)(fe.a,{children:[Object(O.jsx)(E.a,{component:a.b,to:o,size:"large",children:"Add"}),Object(O.jsx)(E.a,{disabled:l,onClick:function(){return u.apply(this,arguments)},size:"large",children:l?"Adding...":"Quick Add"})]})]})})},ve=n(384),we=n(378),ye=["word"],Se=function(e){var t=e.isLoading,n=e.isError,r=e.isSuccess,c=e.data;return n?Object(O.jsx)("span",{children:"Error occured"}):t?Object(O.jsx)("span",{children:"Loading..."}):c.length?r?Object(O.jsx)(O.Fragment,{children:c.map((function(e){var t=e.word;return Object(be.a)(e,ye).meanings.map((function(e,n){return Object(O.jsxs)(y.a,{children:[Object(O.jsx)(me.a,{variant:"h5",children:e.partOfSpeech}),e.definitions.map((function(e,n){return Object(O.jsx)(ge,{word:t,definition:e.definition,synonyms:e.synonyms,example:e.example},n)}))]},n)}))}))}):Object(O.jsx)("span",{children:"Enter some word to see it definition"}):Object(O.jsx)("span",{children:'"Empty data'})},Ie=function(){var e=R("word"),t=Object(d.a)(e,2),n=t[0],r=t[1],c=H(n),a=c.isError,i=c.isLoading,s=c.isSuccess,o=c.data;return Object(O.jsxs)(y.a,{children:[Object(O.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);r(t.get("word"))},children:Object(O.jsx)(ve.a,{fullWidth:!0,children:Object(O.jsx)(we.a,{variant:"standard",name:"word",defaultValue:n,autoFocus:!0,margin:"normal"})})}),Object(O.jsx)(Se,{isLoading:i,isError:a,isSuccess:s,data:o})]})};function Ee(e){var t=e.children,n=Object(w.l)();return f().isAuthenticated?t:Object(O.jsx)(w.a,{to:"/login",state:{from:n}})}var ke=function(){return Object(O.jsx)(w.e,{children:Object(O.jsxs)(w.c,{element:Object(O.jsx)(T,{}),children:[Object(O.jsx)(w.c,{path:"/",element:Object(O.jsx)(Ee,{children:Object(O.jsx)(Ie,{})})}),Object(O.jsx)(w.c,{path:"/add-word",element:Object(O.jsx)(Ee,{children:Object(O.jsx)(Y,{})})}),Object(O.jsx)(w.c,{path:"/my-words",element:Object(O.jsx)(Ee,{children:Object(O.jsx)(le,{})})}),Object(O.jsx)(w.c,{path:"/dictionary",element:Object(O.jsx)(Ie,{})}),Object(O.jsx)(w.c,{path:"/signup",element:Object(O.jsx)(J,{})}),Object(O.jsx)(w.c,{path:"/login",element:Object(O.jsx)(z,{})})]})})},Te=function(){var e=Object(g.a)("(prefers-color-scheme: dark)"),t=Object(s.a)({palette:{mode:e?"dark":"light"}}),n=new j.QueryClient;return Object(O.jsx)(i.StrictMode,{children:Object(O.jsxs)(o.a,{theme:t,children:[Object(O.jsx)(j.QueryClientProvider,{client:n,children:Object(O.jsx)(m,{children:Object(O.jsx)(a.a,{children:Object(O.jsx)(ke,{})})})}),Object(O.jsx)(v.a,{})]})})};c.a.render(Object(O.jsx)(Te,{}),document.getElementById("root"))}},[[326,1,2]]]);
//# sourceMappingURL=main.a14906af.chunk.js.map