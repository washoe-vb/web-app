(this["webpackJsonpwashoe-app"]=this["webpackJsonpwashoe-app"]||[]).push([[0],{326:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(34),i=n.n(a),s=n(50),o=n(17),j=n(209),d=n(385),l=n(59),u=n(4),b=n(5),x=n(133),h=n.n(x),O=h.a.create({baseURL:"https://api.streltsov.rocks:3001/api/v1"});O.interceptors.request.use((function(e){return Object(b.a)(Object(b.a)({},e),{},{headers:Object(b.a)(Object(b.a)({},e.headers),{},{authorization:localStorage.getItem("token")})})}),(function(e){return Promise.reject(e)}));var m=n(211),p=n(3),f=Object(r.createContext)({}),g=function(e){var t=e.children,n=Object(r.useState)((function(){return Boolean(localStorage.token)})),c=Object(u.a)(n,2),a=c[0],i=c[1];window.onstorage=function(e){var t=e.key,n=e.newValue;return"token"===t&&i(Boolean(n))};var s=Object(l.useMutation)((function(e){return O.post("/user/login",e)}),{onSuccess:function(e){var t=e.data.token;i(Boolean(t)),localStorage.setItem("token",t)},onError:function(){m.b.error("Something went wrong")}}),o=s.mutate,j=s.isLoading,d=Object(l.useMutation)((function(e){return O.post("/user/signup",e)}),{onSuccess:function(e){var t=e.data.token;i(Boolean(t)),localStorage.setItem("token",t)},onError:function(){m.b.error("Something went wrong")}}),b=d.mutate,x={isAuthenticated:a,isLoggingIn:j,logIn:o,isSigningUp:d.isLoading,signUp:b};return Object(p.jsx)(f.Provider,{value:x,children:t})},v=function(){return Object(r.useContext)(f)},w=n(386),y=function(e){var t=e.children;return Object(p.jsx)(w.a,{children:t})},S=n(400),I=n(401),E=n(381),k=n(376),T=n(377),L=n(380),P=n(387),F=n(379),A=n(383),B=n(210),C=n(402),W=n(403),q=L.a.Title,U=L.a.Text,M=function(e){var t=e.onLogIn;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(P.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(p.jsx)(q,{level:3,children:"Log In"}),Object(p.jsx)(U,{type:"secondary",children:"to continue to Washoe"})]}),Object(p.jsxs)(F.a,{onFinish:t,children:[Object(p.jsx)(F.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(p.jsx)(A.a,{prefix:Object(p.jsx)(C.a,{}),placeholder:"Email"})}),Object(p.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(p.jsx)(A.a.Password,{prefix:Object(p.jsx)(W.a,{}),placeholder:"Password"})}),Object(p.jsx)(F.a.Item,{children:Object(p.jsx)(B.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Log In"})})]}),Object(p.jsx)(P.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(p.jsxs)(U,{children:["New to Washoe? ",Object(p.jsx)(s.b,{to:"/signup",children:"Create an account"})]})})]})};var z=function(){var e=v(),t=e.logIn;return function(e){var t,n,c=Object(o.l)().state,a=Object(o.n)(),i=(null===c||void 0===c||null===(t=c.from)||void 0===t?void 0:t.pathname)+(null===c||void 0===c||null===(n=c.from)||void 0===n?void 0:n.search)||"/";Object(r.useEffect)((function(){e&&a(i,{replace:!0})}),[e,i,a])}(e.isAuthenticated),Object(p.jsx)(M,{onLogIn:t})},D=L.a.Title,N=L.a.Text,Q=function(e){var t=e.onSignUp;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(P.b,{direction:"vertical",align:"center",style:{width:"100%",marginBottom:"16px"},children:[Object(p.jsx)(D,{level:3,children:"Sign Up"}),Object(p.jsx)(N,{type:"secondary",children:"to continue to Washoe"})]}),Object(p.jsxs)(F.a,{onFinish:t,children:[Object(p.jsx)(F.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(p.jsx)(A.a,{prefix:Object(p.jsx)(C.a,{}),placeholder:"Email"})}),Object(p.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(p.jsx)(A.a.Password,{prefix:Object(p.jsx)(W.a,{}),placeholder:"Password"})}),Object(p.jsx)(F.a.Item,{children:Object(p.jsx)(B.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Sign Up"})})]}),Object(p.jsx)(P.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(p.jsxs)(N,{children:["Already have an account? ",Object(p.jsx)(s.b,{to:"/login",children:"Log In"})]})})]})},V=function(){var e=v().signUp;return Object(p.jsx)(Q,{onSignUp:e})},J=function(){return Object(l.useMutation)((function(e){return O.post("/word/create",e)}))},_=n(2);function R(e){var t=Object(s.c)(),n=Object(u.a)(t,2),r=n[0],c=n[1];return[r.get(e)||"",function(t){var n=Object.fromEntries(r),a=Object(_.a)({},e,t),i=Object(b.a)(Object(b.a)({},n),a);c(i,{replace:!0})}]}var G,H=function(e){return Object(l.useQuery)(["get-definition",e],(function(){return function(e){return h.a.get("https://api.dictionaryapi.dev/api/v2/entries/en/"+e).then((function(e){return e.data}))}(e)}),{refetchOnWindowFocus:!1,cacheTime:1/0,enabled:Boolean(e),initialData:[]})},K=L.a.Title,X=function(){var e=R("word"),t=Object(u.a)(e,2),n=t[0],r=t[1],c=R("definition"),a=Object(u.a)(c,2),i=a[0],s=a[1],o=R("example"),j=Object(u.a)(o,2),d=j[0],l=j[1],x=J(),h=x.mutate,O=x.isLoading,f=F.a.useForm(),g=Object(u.a)(f,1)[0];return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(y,{children:[Object(p.jsx)(K,{level:3,children:"Add a Word"}),Object(p.jsxs)(F.a,{form:g,initialValues:{word:n,definition:i,example:d},onFinish:function(e){h(function(e){var t=e.word,n=e.definition,r=e.example;return Object(b.a)(Object(b.a)({word:t},n?{definition:n}:{}),r?{example:r}:{})}(e),{onSuccess:function(){m.b.success("Success!"),g.resetFields()},onError:function(){m.b.error("Something went wrong")}})},children:[Object(p.jsx)(F.a.Item,{name:"word",required:!0,children:Object(p.jsx)(A.a,{onChange:function(e){var t=e.currentTarget;return r(t.value)},disabled:O,placeholder:"Word"})}),Object(p.jsx)(F.a.Item,{name:"definition",required:!0,children:Object(p.jsx)(A.a.TextArea,{onChange:function(e){var t=e.currentTarget;return s(t.value)},disabled:O,placeholder:"Definition"})}),Object(p.jsx)(F.a.Item,{name:"example",required:!0,children:Object(p.jsx)(A.a.TextArea,{onChange:function(e){var t=e.currentTarget;return l(t.value)},disabled:O,placeholder:"Example"})}),Object(p.jsx)(B.a,{loading:O,type:"primary",htmlType:"submit",style:{width:"100%"},children:"Add"})]})]})})},Y=n(90),Z=n(205),$=n(382),ee=n(390),te=n(393),ne=n(395),re=n(388),ce=n(391),ae=n(392),ie=n(389),se=n(394),oe=n(8);function je(e,t){var n=e.data.count,r=25*t.length;if(n>r)return r}var de=function(){var e=Object(l.useInfiniteQuery)("words",(function(e){var t=e.pageParam,n=void 0===t?0:t;return O.get("/word",{params:{skip:n,limit:25}})}),{getNextPageParam:je}),t=e.data,n=e.fetchNextPage,r=e.hasNextPage,c=(null===t||void 0===t?void 0:t.pages.reduce((function(e,t){return e.concat(t.data.words)}),[]))||[];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Z.a,{dataLength:c.length,next:n,hasMore:Boolean(r),loader:Object(p.jsx)($.a,{active:!0}),children:Object(p.jsx)(re.a,{component:ie.a,sx:{padding:0,marginTop:"56px"},children:Object(p.jsxs)(ee.a,{size:"small",children:[Object(p.jsx)(ce.a,{children:Object(p.jsxs)(ae.a,{children:[Object(p.jsx)(le,{children:"Word"}),Object(p.jsx)(le,{children:"Definition/Example"})]})}),Object(p.jsx)(te.a,{children:c.map((function(e){return Object(p.jsxs)(ae.a,{onClick:function(){return e._id,null},children:[Object(p.jsx)(le,{component:"th",scope:"row",children:e.word}),Object(p.jsxs)(le,{children:[e.definition,Boolean(e.definition&&e.example)&&Object(p.jsx)(se.a,{sx:{margin:"4px"}}),Object(p.jsx)("i",{children:e.example})]})]},e._id)}))})]})})})})},le=Object(oe.a)(ne.a)(G||(G=Object(Y.a)(["\n  font-size: 12px;\n  padding: 4px 8px;\n"]))),ue=n(35),be=n(18),xe=n(30),he=n(396),Oe=n(397),me=n(398),pe=n(399),fe=function(e){var t=e.word,n=e.definition,r=e.example,c=e.synonyms,a=Boolean(c.length)?" : "+JSON.stringify(c):"",i=": ".concat(n.toLowerCase()).concat(a),o="/add-word?word=".concat(t,"&definition=").concat(i||"","&example=").concat(r||""),j=J(),d=j.mutate,l=j.isLoading;function u(){return(u=Object(xe.a)(Object(be.a)().mark((function e(){return Object(be.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d({word:t,definition:i,example:r});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsx)(w.a,{sx:{mb:1},children:Object(p.jsxs)(he.a,{variant:"outlined",children:[Object(p.jsxs)(Oe.a,{children:[Object(p.jsx)(me.a,{variant:"body1",children:i}),r&&Object(p.jsx)(me.a,{sx:{mb:1.5},variant:"body2",color:"text.secondary",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("i",{children:r})})})})]}),Object(p.jsxs)(pe.a,{children:[Object(p.jsx)(E.a,{component:s.b,to:o,size:"large",children:"Add"}),Object(p.jsx)(E.a,{disabled:l,onClick:function(){return u.apply(this,arguments)},size:"large",children:l?"Adding...":"Quick Add"})]})]})})},ge=n(384),ve=n(378),we=["word"],ye=function(e){var t=e.isLoading,n=e.isError,r=e.isSuccess,c=e.data;return n?Object(p.jsx)("span",{children:"Error occured"}):t?Object(p.jsx)("span",{children:"Loading..."}):c.length?r?Object(p.jsx)(p.Fragment,{children:c.map((function(e){var t=e.word;return Object(ue.a)(e,we).meanings.map((function(e,n){return Object(p.jsxs)(w.a,{children:[Object(p.jsx)(me.a,{variant:"h5",children:e.partOfSpeech}),e.definitions.map((function(e,n){return Object(p.jsx)(fe,{word:t,definition:e.definition,synonyms:e.synonyms,example:e.example},n)}))]},n)}))}))}):Object(p.jsx)("span",{children:"Enter some word to see it definition"}):Object(p.jsx)("span",{children:'"Empty data'})},Se=function(){var e=R("word"),t=Object(u.a)(e,2),n=t[0],r=t[1],c=H(n),a=c.isError,i=c.isLoading,s=c.isSuccess,o=c.data;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(w.a,{sx:{mb:4},component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);r(t.get("word"))},noValidate:!0,children:Object(p.jsx)(ge.a,{fullWidth:!0,children:Object(p.jsx)(ve.a,{variant:"standard",name:"word",defaultValue:n,autoFocus:!0,margin:"normal"})})}),Object(p.jsx)(ye,{isLoading:i,isError:a,isSuccess:s,data:o})]})};function Ie(){return v().isAuthenticated?Object(p.jsx)(w.a,{children:Object(p.jsx)(o.b,{})}):Object(p.jsx)(y,{children:Object(p.jsx)(o.b,{})})}function Ee(e){var t=e.children,n=Object(o.l)();return v().isAuthenticated?t:Object(p.jsx)(o.a,{to:"/login",state:{from:n}})}var ke=function(){return Object(p.jsx)(Se,{})},Te=function(){return Object(p.jsx)(S.a,{position:"fixed",component:"nav",children:Object(p.jsxs)(I.a,{children:[Object(p.jsx)(E.a,{component:s.b,to:"/",children:"Washoe"}),Object(p.jsxs)(w.a,{ml:"auto",display:"flex",gap:1,children:[Object(p.jsx)(E.a,{component:s.b,to:"/add-word",children:"Add Word"}),Object(p.jsx)(E.a,{component:s.b,to:"/my-words",children:"My Words"})]})]})})},Le=function(){var e=Object(k.a)("(prefers-color-scheme: dark)"),t=Object(j.a)({palette:{mode:e?"dark":"light"}}),n=new l.QueryClient;return Object(p.jsxs)(d.a,{theme:t,children:[Object(p.jsx)(l.QueryClientProvider,{client:n,children:Object(p.jsxs)(g,{children:[Object(p.jsx)(Te,{}),Object(p.jsx)(o.e,{children:Object(p.jsxs)(o.c,{element:Object(p.jsx)(Ie,{}),children:[Object(p.jsx)(o.c,{path:"/",element:Object(p.jsx)(Ee,{children:Object(p.jsx)(ke,{})})}),Object(p.jsx)(o.c,{path:"/add-word",element:Object(p.jsx)(Ee,{children:Object(p.jsx)(X,{})})}),Object(p.jsx)(o.c,{path:"/my-words",element:Object(p.jsx)(Ee,{children:Object(p.jsx)(de,{})})}),Object(p.jsx)(o.c,{path:"/dictionary",element:Object(p.jsx)(Se,{})}),Object(p.jsx)(o.c,{path:"/signup",element:Object(p.jsx)(V,{})}),Object(p.jsx)(o.c,{path:"/login",element:Object(p.jsx)(z,{})})]})})]})}),Object(p.jsx)(T.a,{})]})},Pe=document.getElementById("root");i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(s.a,{children:Object(p.jsx)(Le,{})})}),Pe)}},[[326,1,2]]]);
//# sourceMappingURL=main.e1da0fd1.chunk.js.map